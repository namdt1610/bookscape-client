{"version":3,"file":"Product-7AKa7URL.js","sources":["../../src/admin/pages/products/Product.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate, Link } from 'react-router-dom'\r\nimport { Product } from '../../../interfaces/Product'\r\nimport useProductActions from '../../../hooks/product/useProductActions'\r\nimport { Button, Space, Badge, Input, Table, Card } from 'antd/lib'\r\nimport { ColumnsType } from 'antd/lib/table'\r\nimport type { SearchProps } from 'antd/lib/input/'\r\n\r\nexport default function Products() {\r\n    const { fetchProducts } = useProductActions()\r\n    const navigate = useNavigate()\r\n    const [products, setProducts] = useState<Product[]>([])\r\n    const [filteredData, setFilteredData] = useState<Product[]>([])\r\n\r\n    useEffect(() => {\r\n        const getProducts = async () => {\r\n            const data = await fetchProducts()\r\n            setProducts(\r\n                data.map((product: Product) => ({\r\n                    ...product,\r\n                    key: product._id,\r\n                }))\r\n            )\r\n        }\r\n\r\n        getProducts()\r\n    }, [])\r\n\r\n    const columns: ColumnsType<Product> = [\r\n        {\r\n            title: 'Image',\r\n            dataIndex: 'image',\r\n            key: 'image',\r\n            render: (image) => (\r\n                <img\r\n                    src={\r\n                        image\r\n                            ? `http://localhost:8888/${image}`\r\n                            : '/img/default.png'\r\n                    }\r\n                    alt=\"Product\"\r\n                    className=\"w-20 h-20 object-cover\"\r\n                />\r\n            ),\r\n        },\r\n        {\r\n            title: 'Name',\r\n            dataIndex: 'name',\r\n            key: 'name',\r\n            sorter: (a, b) => (a.name ?? '').localeCompare(b.name ?? ''),\r\n            render: (_, { name, _id }) => (\r\n                <Link to={`/admin/products/${_id}`}>{name}</Link>\r\n            ),\r\n        },\r\n        {\r\n            title: 'Category',\r\n            dataIndex: 'category',\r\n            key: 'category',\r\n            sorter: (a, b) => a.category.localeCompare(b.category),\r\n        },\r\n        {\r\n            title: 'Price',\r\n            dataIndex: 'price',\r\n            key: 'price',\r\n            sorter: (a, b) => a.price - b.price,\r\n        },\r\n        {\r\n            title: 'Status',\r\n            dataIndex: 'status',\r\n            key: 'status',\r\n            render: (status) => (\r\n                <Badge\r\n                    className=\"capitalize\"\r\n                    status=\"processing\"\r\n                    color={status === 'available' ? 'green' : 'red'}\r\n                    text={status}\r\n                ></Badge>\r\n            ),\r\n            sorter: (a, b) => a.status.localeCompare(b.status),\r\n        },\r\n        {\r\n            title: 'Action',\r\n            key: 'action',\r\n            render: (_, record) => (\r\n                <div>\r\n                    <Space wrap>\r\n                        <Button\r\n                            color=\"primary\"\r\n                            variant=\"outlined\"\r\n                            onClick={() => handleView(record._id)}\r\n                        >\r\n                            View\r\n                        </Button>\r\n                        <Button\r\n                            color=\"danger\"\r\n                            variant=\"outlined\"\r\n                            onClick={() => handleDelete(record._id)}\r\n                        >\r\n                            Delete\r\n                        </Button>\r\n                    </Space>\r\n                </div>\r\n            ),\r\n        },\r\n    ]\r\n\r\n    const handleView = (id: string) => {\r\n        navigate(`/admin/products/${id}`)\r\n    }\r\n\r\n    const handleDelete = (productId: string) => {\r\n        console.log('Delete product ID:', productId)\r\n    }\r\n\r\n    const onSearch: SearchProps['onSearch'] = (value) => {\r\n        console.log('Search:', value)\r\n        const lowercasedValue = value.toLowerCase()\r\n        const filtered = products.filter(\r\n            (product) =>\r\n                product.name?.toLowerCase().includes(lowercasedValue) ||\r\n                product.category?.toLowerCase().includes(lowercasedValue) ||\r\n                product.price.toString().includes(lowercasedValue) ||\r\n                product.stock.toString().includes(lowercasedValue) ||\r\n                product.status?.toLowerCase().includes(lowercasedValue)\r\n        )\r\n        setFilteredData(filtered)\r\n    }\r\n\r\n    const { Search } = Input\r\n\r\n    return (\r\n        <>\r\n            <div className=\"my-4\">\r\n                <Space>\r\n                    <Button>New</Button>\r\n                    <Button>Import</Button>\r\n                    <Search\r\n                        placeholder=\"input search text\"\r\n                        allowClear\r\n                        onSearch={onSearch}\r\n                        style={{ width: 200 }}\r\n                    />\r\n                </Space>\r\n            </div>\r\n            <Card className=\"card-border\">\r\n                <Table\r\n                    bordered\r\n                    size=\"large\"\r\n                    tableLayout=\"fixed\"\r\n                    rowClassName={'cursor-pointer'}\r\n                    className=\"border-black border rounded-lg\"\r\n                    columns={columns}\r\n                    dataSource={filteredData.length ? filteredData : products}\r\n                    locale={{\r\n                        emptyText:\r\n                            filteredData.length === 0\r\n                                ? 'Không có từ khóa trùng khớp'\r\n                                : 'Không có dữ liệu',\r\n                    }}\r\n                />\r\n            </Card>\r\n        </>\r\n    )\r\n}\r\n"],"names":["Products","fetchProducts","useProductActions","navigate","useNavigate","products","setProducts","useState","filteredData","setFilteredData","useEffect","data","product","columns","image","jsx","a","b","_","name","_id","Link","status","Badge","record","jsxs","Space","Button","handleView","handleDelete","id","productId","onSearch","value","lowercasedValue","filtered","_a","_b","_c","Search","Input","Fragment","Card","Table"],"mappings":"0HAQA,SAAwBA,GAAW,CACzB,KAAA,CAAE,cAAAC,GAAkBC,IACpBC,EAAWC,IACX,CAACC,EAAUC,CAAW,EAAIC,EAAA,SAAoB,CAAE,CAAA,EAChD,CAACC,EAAcC,CAAe,EAAIF,EAAA,SAAoB,CAAE,CAAA,EAE9DG,EAAAA,UAAU,IAAM,EACQ,SAAY,CACtB,MAAAC,EAAO,MAAMV,IACnBK,EACIK,EAAK,IAAKC,IAAsB,CAC5B,GAAGA,EACH,IAAKA,EAAQ,GAAA,EACf,CAAA,CACN,IAIR,EAAG,CAAE,CAAA,EAEL,MAAMC,EAAgC,CAClC,CACI,MAAO,QACP,UAAW,QACX,IAAK,QACL,OAASC,GACLC,EAAA,IAAC,MAAA,CACG,IACID,EACM,yBAAyBA,CAAK,GAC9B,mBAEV,IAAI,UACJ,UAAU,wBAAA,CACd,CAER,EACA,CACI,MAAO,OACP,UAAW,OACX,IAAK,OACL,OAAQ,CAACE,EAAGC,KAAOD,EAAE,MAAQ,IAAI,cAAcC,EAAE,MAAQ,EAAE,EAC3D,OAAQ,CAACC,EAAG,CAAE,KAAAC,EAAM,IAAAC,CAAA,IAChBL,EAAAA,IAACM,EAAK,CAAA,GAAI,mBAAmBD,CAAG,GAAK,SAAKD,EAAA,CAElD,EACA,CACI,MAAO,WACP,UAAW,WACX,IAAK,WACL,OAAQ,CAACH,EAAGC,IAAMD,EAAE,SAAS,cAAcC,EAAE,QAAQ,CACzD,EACA,CACI,MAAO,QACP,UAAW,QACX,IAAK,QACL,OAAQ,CAACD,EAAGC,IAAMD,EAAE,MAAQC,EAAE,KAClC,EACA,CACI,MAAO,SACP,UAAW,SACX,IAAK,SACL,OAASK,GACLP,EAAA,IAACQ,EAAA,MAAA,CACG,UAAU,aACV,OAAO,aACP,MAAOD,IAAW,YAAc,QAAU,MAC1C,KAAMA,CAAA,CACT,EAEL,OAAQ,CAACN,EAAGC,IAAMD,EAAE,OAAO,cAAcC,EAAE,MAAM,CACrD,EACA,CACI,MAAO,SACP,IAAK,SACL,OAAQ,CAACC,EAAGM,UACP,MACG,CAAA,SAAAC,EAAAA,KAACC,EAAAA,MAAM,CAAA,KAAI,GACP,SAAA,CAAAX,EAAA,IAACY,EAAA,OAAA,CACG,MAAM,UACN,QAAQ,WACR,QAAS,IAAMC,EAAWJ,EAAO,GAAG,EACvC,SAAA,MAAA,CAED,EACAT,EAAA,IAACY,EAAA,OAAA,CACG,MAAM,SACN,QAAQ,WACR,QAAS,IAAME,EAAaL,EAAO,GAAG,EACzC,SAAA,QAAA,CAED,CAAA,CAAA,CACJ,CACJ,CAAA,CAER,CAAA,EAGEI,EAAcE,GAAe,CACtB3B,EAAA,mBAAmB2B,CAAE,EAAE,CAAA,EAG9BD,EAAgBE,GAAsB,CAChC,QAAA,IAAI,qBAAsBA,CAAS,CAAA,EAGzCC,EAAqCC,GAAU,CACzC,QAAA,IAAI,UAAWA,CAAK,EACtB,MAAAC,EAAkBD,EAAM,cACxBE,EAAW9B,EAAS,OACrBO,GACG,WAAA,QAAAwB,EAAAxB,EAAQ,OAAR,YAAAwB,EAAc,cAAc,SAASF,OACrCG,EAAAzB,EAAQ,WAAR,YAAAyB,EAAkB,cAAc,SAASH,KACzCtB,EAAQ,MAAM,WAAW,SAASsB,CAAe,GACjDtB,EAAQ,MAAM,SAAS,EAAE,SAASsB,CAAe,KACjDI,EAAA1B,EAAQ,SAAR,YAAA0B,EAAgB,cAAc,SAASJ,IAAe,EAE9DzB,EAAgB0B,CAAQ,CAAA,EAGtB,CAAE,OAAAI,CAAW,EAAAC,QAEnB,OAEQf,EAAA,KAAAgB,WAAA,CAAA,SAAA,CAAA1B,MAAC,MAAI,CAAA,UAAU,OACX,SAAAU,EAAA,KAACC,QACG,CAAA,SAAA,CAAAX,EAAAA,IAACY,UAAO,SAAG,KAAA,CAAA,EACXZ,EAAAA,IAACY,UAAO,SAAM,QAAA,CAAA,EACdZ,EAAA,IAACwB,EAAA,CACG,YAAY,oBACZ,WAAU,GACV,SAAAP,EACA,MAAO,CAAE,MAAO,GAAI,CAAA,CACxB,CAAA,CAAA,CACJ,CACJ,CAAA,EACAjB,EAAAA,IAAC2B,EAAAA,KAAK,CAAA,UAAU,cACZ,SAAA3B,EAAA,IAAC4B,EAAA,MAAA,CACG,SAAQ,GACR,KAAK,QACL,YAAY,QACZ,aAAc,iBACd,UAAU,iCACV,QAAA9B,EACA,WAAYL,EAAa,OAASA,EAAeH,EACjD,OAAQ,CACJ,UACIG,EAAa,SAAW,EAClB,8BACA,kBACd,CAAA,CAAA,EAER,CACJ,CAAA,CAAA,CAER"}