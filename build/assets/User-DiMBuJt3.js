import{bh as C,r,j as t,bi as s,L as m,aj as v,bt as w,bu as I}from"./index-Bj05vSZy.js";import{u as z}from"./useUserActions-HAFeYzaT.js";import{l as S}from"./lodash-TNSd0OCY.js";function U(){const{fetchUsers:u}=z(),h=C(),[o,x]=r.useState([]),[c,n]=r.useState([]),i=async()=>{const e=await u();x(e.map(a=>({...a,key:a._id}))),n(e)};r.useEffect(()=>{i()},[]);const p=r.useCallback((e,a)=>t.jsxs(s.Space,{size:"middle",wrap:!0,children:[t.jsx(s.Button,{color:"primary",variant:"outlined",className:"btn-border btn-hover",onClick:()=>g(a._id),children:"Xem"}),t.jsx(s.Button,{color:"danger",variant:"outlined",className:"btn-border btn-hover",onClick:()=>j(a._id),children:"Xóa"})]}),[]),b=r.useMemo(()=>[{title:"Avatar",dataIndex:"avatar",key:"avatar",render:e=>t.jsx("img",{src:e?`http://localhost:8888/${e}`:"/img/meerkat.png",alt:"Avatar",className:"w-20 h-20 rounded-full object-cover",loading:"lazy"})},{title:"Name",dataIndex:"name",key:"name",sorter:(e,a)=>(e.name??"").localeCompare(a.name??""),render:(e,{name:a,_id:l})=>t.jsx(m,{to:`/admin/users/${l}`,children:a})},{title:"Email",dataIndex:"email",key:"email",sorter:(e,a)=>e.email.localeCompare(a.email)},{title:"Phone",dataIndex:"phone",key:"phone",sorter:(e,a)=>(e.phone??"").localeCompare(a.phone??"")},{title:"Status",dataIndex:"status",key:"status",render:e=>t.jsx(s.Badge,{className:"capitalize",status:"processing",color:e==="active"?"green":"red",text:e}),sorter:(e,a)=>e.status.localeCompare(a.status)},{title:"Action",key:"action",render:p}],[]),g=e=>{h(`/admin/users/${e}`)},j=e=>{s.Modal.confirm({title:"Are you sure?",content:"Do you really want to delete this user?",okText:"Yes",cancelText:"No",onOk:()=>{console.log("Delete user ID:",e)}})},f=r.useMemo(()=>S.debounce(e=>{const a=e.toLowerCase();if(e==="")n(o);else{const l=o.filter(y=>["name","email","role","phone","status"].some(N=>{var d;return(d=y[N])==null?void 0:d.toLowerCase().includes(a)}));n(l)}},300),[o]),{Search:k}=s.Input;return t.jsxs(t.Fragment,{children:[t.jsx(s.Card,{className:"my-6 card-border",children:t.jsxs(s.Space,{size:"middle",wrap:!0,children:[t.jsx(m,{to:"/admin/register",children:t.jsx(s.Button,{size:"large",className:"btn-border btn-hover",icon:t.jsx(v,{}),children:"New"})}),t.jsx(s.Button,{size:"large",className:"btn-border btn-hover",icon:t.jsx(w,{}),children:"Import"}),t.jsx(s.Button,{size:"large",className:"btn-border btn-hover",onClick:()=>i(),icon:t.jsx(I,{}),children:"Refresh"}),t.jsx(k,{size:"large",placeholder:"input search text",allowClear:!0,onSearch:f,style:{width:"auto"}})]})}),t.jsx(s.Card,{className:"card-border",title:"User Management",color:"#f3f3f3",children:t.jsx(s.Table,{size:"large",tableLayout:"fixed",rowClassName:"cursor-pointer",className:"border-black border rounded-lg",dataSource:c,columns:b,locale:{emptyText:c.length===0?"Không có từ khóa trùng khớp":"Không có dữ liệu"}})})]})}export{U as default};
//# sourceMappingURL=User-DiMBuJt3.js.map
